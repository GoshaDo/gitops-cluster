helm install --namespace argocd --create-namespace argocd ./charts/argocd
helm install --namespace ingress-nginx --create-namespace ingress-nginx ./charts/ingress-nginx
kubectl port-forward service/argocd-server -n argocd 8080:443
kubectl create secret generic docker-token --from-literal=user=goshad --from-literal=password=xxxxxxxxxx -n default
kubectl create secret generic rookout-token --from-literal=token=xxxxxxxxxx -n default

sudo vim /etc/hosts >
127.0.0.1 flask-app.example
127.0.0.1 argocd.example.com

openssl req \
-x509 -newkey rsa:4096 -sha256 -nodes \
-keyout tls.key -out tls.crt \
-subj "/CN=flask-app.example" -days 365

kubectl create secret tls ingress-local-tls \
  --cert=tls.crt \
  --key=tls.key


#Workflows:

kubectl create secret generic git-creds --from-file=ssh-private-key=/Users/gosha/.ssh/github -n argocd

# expose localhost
ngrok http 4567